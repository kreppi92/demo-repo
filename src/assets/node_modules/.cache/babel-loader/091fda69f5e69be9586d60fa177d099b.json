{"ast":null,"code":"import _defineProperty from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Button from'@material-ui/core/Button';import CircularProgress from'@material-ui/core/CircularProgress';import Checkbox from'@material-ui/core/Checkbox';import FormControl from'@material-ui/core/FormControl';import FormHelperText from'@material-ui/core/FormHelperText';import Paper from'@material-ui/core/Paper';import Typography from'@material-ui/core/Typography';import TextField from'@material-ui/core/TextField';import{withStyles}from'@material-ui/core/styles';import{palette}from'../../constants/styles';import logoIcon from'../../images/logo.png';import Footer from'./Footer';import Firebase from'../../constants/firebase';import CustomSnackbar from'../shared/CustomSnackbar';var store=require('store');var styles={boldText:{fontWeight:700},button:{margin:'30px 0 0 0'},checkBoxContainer:{alignItems:'center',display:'flex',flexDirection:'row',fontSize:'12px',fontWeight:'normal',justifyContent:'flex-start',lineHeight:'16px',letterSpacing:0.2,margin:'0 0 5px -10px'},container:{display:'flex',justifyContent:'center'},contentContainer:{alignItems:'center',display:'flex',justifyContent:'center',flexDirection:'column',padding:'40px 20px 40px 20px','@media (min-width:780px)':{padding:'40px 40px 40px 40px'}},formHelperText:{fontWeight:'normal',letterSpacing:0.2,margin:'10px 0 20px 0'},footer:{margin:'95vh 0 0 0',width:'100%'},paper:{position:'absolute',width:'100%',boxShadow:'none',borderRadius:'5px','@media (min-width:780px)':{top:'16%',width:'500px',border:'1px solid',borderColor:palette.gray[0]}},linkContainer:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',margin:'25px 0 30px 0',width:'100%'},linkContainerVerification:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',margin:'25px 0 30px 0',width:'100%'},linkTerms:{color:palette.gray[2],fontWeight:'700'},link:{color:palette.blue[0],fontWeight:700,fontSize:'15px',textDecoration:'none',\"&:hover\":{textDecoration:'underline'}},logoIcon:{marginBottom:'30px',objectFit:'contain',height:'40px',width:'40px'},textField:{marginTop:'25px'},verificationText:{fontSize:'15px',margin:'30px 0 0 0',letterSpacing:0.3,lineHeight:'20px'}};var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);function Signup(){var _getPrototypeOf2;var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Signup)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={code:'',codeHelperText:'',codeError:false,email:'',emailHelperText:'',emailError:false,password:'',passwordHelperText:'',passwordError:false,verificationSent:false,snackbarIsOpen:false,snackbarVariant:'success',snackbarMessage:''};_this.handleChange=function(name){return function(event){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,name,event.target.value),_defineProperty(_this$setState,\"emailHelperText\",''),_defineProperty(_this$setState,\"emailError\",false),_defineProperty(_this$setState,\"passwordHelperText\",''),_defineProperty(_this$setState,\"passwordError\",false),_defineProperty(_this$setState,\"codeHelperText\",''),_defineProperty(_this$setState,\"codeError\",false),_defineProperty(_this$setState,\"terms\",false),_defineProperty(_this$setState,\"termsError\",false),_this$setState));};};_this.onKeyPress=function(e){if(e.key==='Enter'){_this.validateForms();}};_this.handleTermsChange=function(name){return function(event){var _this$setState2;_this.setState((_this$setState2={},_defineProperty(_this$setState2,name,event.target.checked),_defineProperty(_this$setState2,\"termsError\",false),_this$setState2));};};_this.handleOnClick=function(event){_this.validateForms();};_this.onSnackBarClose=function(){_this.setState({snackbarIsOpen:false});};_this.displaySnackbar=function(variant,message){_this.setState({snackbarIsOpen:true,snackbarVariant:variant,snackbarMessage:message,isLoading:false});};_this.sendVerificationCode=function(){var email=_this.state.email;_this.setState({isLoading:true});var generateCode=Firebase.functions().httpsCallable('generateCode');generateCode({email:email}).then(function(result){if(result.data.success){this.setState({verificationSent:true,isLoading:false});}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));};_this.handleCodeVerification=function(){var _this$state=_this.state,email=_this$state.email,code=_this$state.code;var codeHasError=false;var codeErrorText=\"\";if(code===\"\"){codeHasError=true;codeErrorText=\"Please enter your verification code.\";}if(codeHasError){_this.setState({codeError:codeHasError,codeHelperText:codeErrorText});}else{_this.setState({isLoading:true});var verifyCode=Firebase.functions().httpsCallable('verifyCode');verifyCode({email:email,code:code}).then(function(result){if(result.data.success){this.createAccount();}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));}};_this.createAccount=function(){var _this$state2=_this.state,email=_this$state2.email,password=_this$state2.password;var signUp=Firebase.functions().httpsCallable('signUp');signUp({email:email,password:password}).then(function(result){if(result.data.success){store.set('token',result.data.token);this.displaySnackbar('success',\"Account successfully created.\");window.location='/home';}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));};return _this;}_createClass(Signup,[{key:\"validateForms\",value:function validateForms(){var _this$state3=this.state,email=_this$state3.email,password=_this$state3.password,terms=_this$state3.terms;var emailHasError=false;var emailErrorText=\"\";var termsError=!terms;if(email===\"\"){emailHasError=true;emailErrorText=\"Please enter a valid email.\";}var passwordHasError=false;var passwordErrorText=\"\";if(password===\"\"){passwordHasError=true;passwordErrorText=\"Please enter a password.\";}if(emailHasError||passwordHasError||termsError){this.displayFormError(emailHasError,emailErrorText,passwordHasError,passwordErrorText,termsError);}else{this.sendVerificationCode();}}},{key:\"displayFormError\",value:function displayFormError(emailHasError,emailErrorText,passwordHasError,passwordErrorText,termsError){this.setState({emailError:emailHasError,emailHelperText:emailErrorText,passwordError:passwordHasError,passwordHelperText:passwordErrorText,termsError:termsError});}},{key:\"render\",value:function render(){var classes=this.props.classes;var _this$state4=this.state,code=_this$state4.code,codeError=_this$state4.codeError,codeHelperText=_this$state4.codeHelperText,email=_this$state4.email,emailHelperText=_this$state4.emailHelperText,emailError=_this$state4.emailError,password=_this$state4.password,passwordHelperText=_this$state4.passwordHelperText,passwordError=_this$state4.passwordError,isLoading=_this$state4.isLoading,snackbarIsOpen=_this$state4.snackbarIsOpen,snackbarMessage=_this$state4.snackbarMessage,snackbarVariant=_this$state4.snackbarVariant,verificationSent=_this$state4.verificationSent,terms=_this$state4.terms,termsError=_this$state4.termsError;return React.createElement(\"div\",{className:classes.container},React.createElement(Paper,{className:classes.paper},verificationSent?React.createElement(\"div\",{className:classes.contentContainer},React.createElement(\"img\",{src:logoIcon,className:classes.logoIcon,alt:\"\"}),React.createElement(Typography,{variant:\"h4\",gutterBottom:true},\"Confirm verification\"),React.createElement(\"div\",{className:classes.verificationText},\"Please enter the 6 digit verification code sent to \",React.createElement(\"span\",{className:classes.boldText},email),\".\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"If you did not receive it in your main inbox, please check your junk folder.\"),React.createElement(TextField,{fullWidth:true,error:codeError,className:classes.textField,id:\"outlined-code\",label:\"Code\",name:\"code\",type:\"text\",helperText:codeHelperText,value:code,onChange:this.handleChange('code'),variant:\"outlined\"}),React.createElement(Button,{className:classes.button,size:\"large\",variant:'contained',color:\"primary\",fullWidth:true,onClick:this.handleCodeVerification},isLoading?React.createElement(CircularProgress,{variant:\"indeterminate\",disableShrink:true,size:24,thickness:4}):'Verify code'),React.createElement(\"div\",{className:classes.linkContainerVerification},React.createElement(\"a\",{className:classes.link,href:\"#\",onClick:this.sendVerificationCode},\"Resend activation code?\"),React.createElement(\"a\",{className:classes.link,href:\"/signin\"},\"Sign in\"))):React.createElement(\"div\",{className:classes.contentContainer},React.createElement(\"img\",{src:logoIcon,className:classes.logoIcon,alt:\"\"}),React.createElement(Typography,{variant:\"h4\",gutterBottom:true},\"Create an account\"),React.createElement(TextField,{fullWidth:true,error:emailError,className:classes.textField,id:\"outlined-email\",label:\"Email\",name:\"email\",type:\"email\",helperText:emailHelperText,value:email,onChange:this.handleChange('email'),variant:\"outlined\"}),React.createElement(TextField,{fullWidth:true,error:passwordError,className:classes.textField,id:\"outlined-password\",label:\"Password\",name:\"password\",type:\"password\",value:password,helperText:passwordHelperText,onChange:this.handleChange('password'),variant:\"outlined\"}),React.createElement(FormControl,{required:true,error:termsError,component:\"fieldset\",fullWidth:true},React.createElement(\"div\",{className:classes.checkBoxContainer},React.createElement(Checkbox,{checked:terms,onChange:this.handleTermsChange('terms'),value:\"terms\",color:\"primary\"}),React.createElement(\"div\",null,\"I agree to the \",React.createElement(\"a\",{className:classes.linkTerms,href:\"/terms\",target:\"_blank\",rel:\"noopener noreferrer\"},\"terms of use\"),\" and \",React.createElement(\"a\",{className:classes.linkTerms,href:\"/privacy\",target:\"_blank\",rel:\"noopener noreferrer\"},\"privacy policy\"),\".\")),termsError?React.createElement(FormHelperText,{className:classes.formHelperText,error:true},\"You must agree to the terms of use and privacy policy to proceed.\"):React.createElement(\"div\",null)),React.createElement(Button,{className:classes.button,size:\"large\",variant:'contained',color:\"primary\",fullWidth:true,onClick:this.handleOnClick},isLoading?React.createElement(CircularProgress,{variant:\"indeterminate\",disableShrink:true,size:24,thickness:4}):'Create account'),React.createElement(\"div\",{className:classes.linkContainer},React.createElement(\"div\",null),React.createElement(\"a\",{className:classes.link,href:\"/signin\"},\"Existing account? Sign in now\")))),React.createElement(\"div\",{className:classes.footer},React.createElement(Footer,null)),React.createElement(CustomSnackbar,{variant:snackbarVariant,message:snackbarMessage,open:snackbarIsOpen,onSnackBarClose:this.onSnackBarClose}));}}]);return Signup;}(Component);export default withStyles(styles)(Signup);","map":{"version":3,"sources":["/Users/satraj/Documents/web/satstreet/src/components/main/Signup.js"],"names":["React","Component","Button","CircularProgress","Checkbox","FormControl","FormHelperText","Paper","Typography","TextField","withStyles","palette","logoIcon","Footer","Firebase","CustomSnackbar","store","require","styles","boldText","fontWeight","button","margin","checkBoxContainer","alignItems","display","flexDirection","fontSize","justifyContent","lineHeight","letterSpacing","container","contentContainer","padding","formHelperText","footer","width","paper","position","boxShadow","borderRadius","top","border","borderColor","gray","linkContainer","linkContainerVerification","linkTerms","color","link","blue","textDecoration","marginBottom","objectFit","height","textField","marginTop","verificationText","Signup","state","code","codeHelperText","codeError","email","emailHelperText","emailError","password","passwordHelperText","passwordError","verificationSent","snackbarIsOpen","snackbarVariant","snackbarMessage","handleChange","name","event","setState","target","value","onKeyPress","e","key","validateForms","handleTermsChange","checked","handleOnClick","onSnackBarClose","displaySnackbar","variant","message","isLoading","sendVerificationCode","generateCode","functions","httpsCallable","then","result","data","success","error","bind","handleCodeVerification","codeHasError","codeErrorText","verifyCode","createAccount","signUp","set","token","window","location","terms","emailHasError","emailErrorText","termsError","passwordHasError","passwordErrorText","displayFormError","classes","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport { withStyles } from '@material-ui/core/styles'\nimport { palette } from '../../constants/styles'\nimport logoIcon from '../../images/logo.png'\nimport Footer from './Footer'\nimport Firebase from '../../constants/firebase'\nimport CustomSnackbar from '../shared/CustomSnackbar'\n\nvar store = require('store')\n\nconst styles = {\n  boldText: {\n    fontWeight: 700\n  },\n\n  button: {\n    margin: '30px 0 0 0'\n  },\n\n  checkBoxContainer: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    fontSize: '12px',\n    fontWeight: 'normal',\n    justifyContent: 'flex-start',\n    lineHeight: '16px',\n    letterSpacing: 0.2,\n    margin: '0 0 5px -10px'\n  },\n\n  container: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n\n  contentContainer: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '40px 20px 40px 20px',\n\n    '@media (min-width:780px)': {\n      padding: '40px 40px 40px 40px',\n    },\n  },\n\n  formHelperText: {\n    fontWeight: 'normal',\n    letterSpacing: 0.2,\n    margin: '10px 0 20px 0'\n  },\n\n  footer: {\n    margin: '95vh 0 0 0',\n    width: '100%'\n  },\n\n  paper: {\n    position: 'absolute',\n    width: '100%',\n    boxShadow: 'none',\n    borderRadius: '5px',\n\n    '@media (min-width:780px)': {\n      top: '16%',\n      width: '500px',\n      border: '1px solid',\n      borderColor: palette.gray[0]\n    },\n  },\n\n  linkContainer: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    margin: '25px 0 30px 0',\n    width: '100%'\n  },\n\n  linkContainerVerification: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    margin: '25px 0 30px 0',\n    width: '100%'\n  },\n\n  linkTerms: {\n    color: palette.gray[2],\n    fontWeight: '700'\n  },\n\n  link: {\n    color: palette.blue[0],\n    fontWeight: 700,\n    fontSize: '15px',\n    textDecoration: 'none',\n\n    \"&:hover\": {\n      textDecoration: 'underline'\n    }\n  },\n\n  logoIcon: {\n    marginBottom: '30px',\n    objectFit: 'contain',\n    height: '40px',\n    width: '40px'\n  },\n\n  textField: {\n    marginTop: '25px'\n  },\n\n  verificationText: {\n    fontSize: '15px',\n    margin: '30px 0 0 0',\n    letterSpacing: 0.3,\n    lineHeight: '20px',\n  }\n}\n\nclass Signup extends Component {\n  state = {\n    code: '',\n    codeHelperText: '',\n    codeError: false,\n    email: '',\n    emailHelperText: '',\n    emailError: false,\n    password: '',\n    passwordHelperText: '',\n    passwordError: false,\n    verificationSent: false,\n    snackbarIsOpen: false,\n    snackbarVariant: 'success',\n    snackbarMessage: ''\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n      emailHelperText: '',\n      emailError: false,\n      passwordHelperText: '',\n      passwordError: false,\n      codeHelperText: '',\n      codeError: false,\n      terms: false,\n      termsError: false\n    })\n  }\n\n  onKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      this.validateForms()\n    }\n  }\n\n  handleTermsChange = name => event => {\n    this.setState({\n      [name]: event.target.checked,\n      termsError: false\n    })\n  }\n\n  handleOnClick = event => {\n    this.validateForms()\n  }\n\n  validateForms() {\n    const { email, password, terms } = this.state\n\n    var emailHasError = false\n    var emailErrorText = \"\"\n    var termsError = !terms\n\n    if (email === \"\") {\n      emailHasError = true\n      emailErrorText = \"Please enter a valid email.\"\n    }\n\n    var passwordHasError = false\n    var passwordErrorText = \"\"\n\n    if (password === \"\") {\n      passwordHasError = true\n      passwordErrorText = \"Please enter a password.\"\n    }\n\n    if (emailHasError || passwordHasError || termsError) {\n      this.displayFormError(emailHasError, emailErrorText, passwordHasError, passwordErrorText, termsError)\n    } else {\n      this.sendVerificationCode()\n    }\n  }\n\n  displayFormError(emailHasError, emailErrorText, passwordHasError, passwordErrorText, termsError) {\n    this.setState({\n      emailError: emailHasError,\n      emailHelperText: emailErrorText,\n      passwordError: passwordHasError,\n      passwordHelperText: passwordErrorText,\n      termsError: termsError\n    })\n  }\n\n  onSnackBarClose = () => {\n    this.setState({\n      snackbarIsOpen: false\n    })\n  }\n\n  displaySnackbar = (variant, message) => {\n    this.setState({\n      snackbarIsOpen: true,\n      snackbarVariant: variant,\n      snackbarMessage: message,\n      isLoading: false\n    })\n  }\n\n  sendVerificationCode = () => {\n    const { email } = this.state\n\n    this.setState({ isLoading: true })\n\n    var generateCode = Firebase.functions().httpsCallable('generateCode')\n    generateCode({ email: email }).then(function (result) {\n      if (result.data.success) {\n        this.setState({ \n          verificationSent: true,\n          isLoading: false\n         })\n      } else {\n        this.displaySnackbar('error', result.data.error)\n      }\n    }.bind(this))\n  }\n\n  handleCodeVerification = () => {\n    const { email, code } = this.state\n\n    var codeHasError = false\n    var codeErrorText = \"\"\n\n    if (code === \"\") {\n      codeHasError = true\n      codeErrorText = \"Please enter your verification code.\"\n    }\n\n    if (codeHasError) {\n      this.setState({\n        codeError: codeHasError,\n        codeHelperText: codeErrorText,\n      })\n    } else {\n      this.setState({ isLoading: true })\n\n      var verifyCode = Firebase.functions().httpsCallable('verifyCode')\n      verifyCode({ email: email, code: code }).then(function (result) {\n        if (result.data.success) {\n          this.createAccount()\n        } else {\n          this.displaySnackbar('error', result.data.error)\n        }\n      }.bind(this))\n    }\n  }\n\n  createAccount = () => {\n    const { email, password } = this.state\n\n    var signUp = Firebase.functions().httpsCallable('signUp')\n    signUp({ email: email, password: password }).then(function (result) {\n      if (result.data.success) {\n        store.set('token', result.data.token)\n        this.displaySnackbar('success', \"Account successfully created.\")\n        window.location = '/home'\n      } else {\n        this.displaySnackbar('error', result.data.error)\n      }\n    }.bind(this))\n  }\n\n  render() {\n    const { classes } = this.props\n    const { code, codeError, codeHelperText, email, emailHelperText, emailError, password, passwordHelperText, passwordError, isLoading, snackbarIsOpen, snackbarMessage, snackbarVariant, verificationSent, terms, termsError } = this.state\n\n    return (\n      <div className={classes.container}>\n        <Paper className={classes.paper}>\n            {\n              verificationSent ?\n\n              <div className={classes.contentContainer}>\n                <img src={logoIcon} className={classes.logoIcon} alt=\"\" />\n                <Typography variant=\"h4\" gutterBottom>\n                  Confirm verification\n                </Typography>\n\n                <div className={classes.verificationText}>\n                  Please enter the 6 digit verification code sent to <span className={classes.boldText}>{email}</span>.<br /><br />If you did not receive it in your main inbox, please check your junk folder.\n                </div>\n\n                <TextField\n                  fullWidth\n                  error={codeError}\n                  className={classes.textField}\n                  id=\"outlined-code\"\n                  label=\"Code\"\n                  name=\"code\"\n                  type=\"text\"\n                  helperText={codeHelperText}\n                  value={code}\n                  onChange={this.handleChange('code')}\n                  variant=\"outlined\"\n                />\n\n                <Button\n                  className={classes.button}\n                  size=\"large\"\n                  variant={'contained'}\n                  color=\"primary\"\n                  fullWidth\n                  onClick={this.handleCodeVerification}\n                >\n                  {isLoading ? (\n                    <CircularProgress\n                      variant=\"indeterminate\"\n                      disableShrink\n                      size={24}\n                      thickness={4}\n                    />\n                  ) : (\n                      'Verify code'\n                  )}\n                </Button>\n\n                <div className={classes.linkContainerVerification}>\n                  <a className={classes.link} href={\"#\"} onClick={this.sendVerificationCode}>Resend activation code?</a>\n                  <a className={classes.link} href={\"/signin\"}>Sign in</a>\n                </div>\n              </div>\n\n              :\n\n              <div className={classes.contentContainer}>\n                <img src={logoIcon} className={classes.logoIcon} alt=\"\" />\n                <Typography variant=\"h4\" gutterBottom>\n                  Create an account\n                </Typography>\n\n                <TextField\n                  fullWidth\n                  error={emailError}\n                  className={classes.textField}\n                  id=\"outlined-email\"\n                  label=\"Email\"\n                  name=\"email\"\n                  type=\"email\"\n                  helperText={emailHelperText}\n                  value={email}\n                  onChange={this.handleChange('email')}\n                  variant=\"outlined\"\n                />\n\n                <TextField\n                  fullWidth\n                  error={passwordError}\n                  className={classes.textField}\n                  id=\"outlined-password\"\n                  label=\"Password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  helperText={passwordHelperText}\n                  onChange={this.handleChange('password')}\n                  variant=\"outlined\"\n                />\n\n              <FormControl required error={termsError} component=\"fieldset\" fullWidth>\n                <div className={classes.checkBoxContainer}>\n                  <Checkbox checked={terms} onChange={this.handleTermsChange('terms')} value=\"terms\" color=\"primary\" />\n                  <div>I agree to the <a className={classes.linkTerms} href={\"/terms\"} target=\"_blank\" rel=\"noopener noreferrer\">terms of use</a> and <a className={classes.linkTerms} href={\"/privacy\"} target=\"_blank\" rel=\"noopener noreferrer\">privacy policy</a>.</div>\n                </div>\n\n                {termsError ? <FormHelperText className={classes.formHelperText} error>You must agree to the terms of use and privacy policy to proceed.</FormHelperText> : <div />}\n              </FormControl>\n\n                <Button\n                  className={classes.button}\n                  size=\"large\"\n                  variant={'contained'}\n                  color=\"primary\"\n                  fullWidth\n                  onClick={this.handleOnClick}\n                >\n                  {isLoading ? (\n                    <CircularProgress\n                      variant=\"indeterminate\"\n                      disableShrink\n                      size={24}\n                      thickness={4}\n                    />\n                  ) : (\n                      'Create account'\n                    )}\n                </Button>\n\n                <div className={classes.linkContainer}>\n                  <div />\n                  <a className={classes.link} href={\"/signin\"}>Existing account? Sign in now</a>\n                </div>\n\n              </div>\n            }\n        </Paper>\n        <div className={classes.footer}>\n          <Footer />\n        </div>\n        <CustomSnackbar variant={snackbarVariant} message={snackbarMessage} open={snackbarIsOpen} onSnackBarClose={this.onSnackBarClose}/>\n      </div>\n    )\n  }\n}\n\nSignup.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(Signup)"]},"metadata":{},"sourceType":"module"}