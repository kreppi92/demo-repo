{"ast":null,"code":"import _defineProperty from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/satraj/Documents/web/satstreet/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Button from'@material-ui/core/Button';import CircularProgress from'@material-ui/core/CircularProgress';import Paper from'@material-ui/core/Paper';import Typography from'@material-ui/core/Typography';import TextField from'@material-ui/core/TextField';import{withStyles}from'@material-ui/core/styles';import{palette}from'../../constants/styles';import logoIcon from'../../images/logo.png';import Footer from'./Footer';import Firebase from'../../constants/firebase';import CustomSnackbar from'../shared/CustomSnackbar';var store=require('store');var styles={boldText:{fontWeight:700},button:{margin:'30px 0 0 0'},container:{display:'flex',justifyContent:'center'},contentContainer:{alignItems:'center',display:'flex',justifyContent:'center',flexDirection:'column',padding:'40px 20px 40px 20px','@media (min-width:780px)':{padding:'40px 40px 40px 40px'}},footer:{margin:'95vh 0 0 0',width:'100%'},paper:{position:'absolute',width:'100%',boxShadow:'none',borderRadius:'5px','@media (min-width:780px)':{top:'16%',width:'500px',border:'1px solid',borderColor:palette.gray[0]}},linkContainer:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',margin:'25px 0 30px 0',width:'100%'},linkContainerVerification:{alignItems:'center',display:'flex',flexDirection:'row',justifyContent:'space-between',margin:'25px 0 30px 0',width:'100%'},link:{color:palette.blue[0],fontWeight:700,fontSize:'15px',textDecoration:'none',\"&:hover\":{textDecoration:'underline'}},logoIcon:{marginBottom:'30px',objectFit:'contain',height:'40px',width:'40px'},textField:{marginTop:'25px'},verificationText:{fontSize:'15px',margin:'30px 0 0 0',letterSpacing:0.3,lineHeight:'20px'}};var Signup=/*#__PURE__*/function(_Component){_inherits(Signup,_Component);function Signup(){var _getPrototypeOf2;var _this;_classCallCheck(this,Signup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Signup)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={code:'',codeHelperText:'',codeError:false,email:'',emailHelperText:'',emailError:false,password:'',passwordHelperText:'',passwordError:false,verificationSent:false,snackbarIsOpen:false,snackbarVariant:'success',snackbarMessage:''};_this.handleChange=function(name){return function(event){var _this$setState;_this.setState((_this$setState={},_defineProperty(_this$setState,name,event.target.value),_defineProperty(_this$setState,\"emailHelperText\",''),_defineProperty(_this$setState,\"emailError\",false),_defineProperty(_this$setState,\"passwordHelperText\",''),_defineProperty(_this$setState,\"passwordError\",false),_defineProperty(_this$setState,\"codeHelperText\",''),_defineProperty(_this$setState,\"codeError\",false),_this$setState));};};_this.handleOnClick=function(event){_this.validateForms();};_this.onSnackBarClose=function(){_this.setState({snackbarIsOpen:false});};_this.displaySnackbar=function(variant,message){_this.setState({snackbarIsOpen:true,snackbarVariant:variant,snackbarMessage:message,isLoading:false});};_this.sendVerificationCode=function(){var email=_this.state.email;_this.setState({isLoading:true});var generateCode=Firebase.functions().httpsCallable('generateCode');generateCode({email:email}).then(function(result){if(result.data.success){this.setState({verificationSent:true,isLoading:false});}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));};_this.handleCodeVerification=function(){var _this$state=_this.state,email=_this$state.email,code=_this$state.code;var codeHasError=false;var codeErrorText=\"\";if(code===\"\"){codeHasError=true;codeErrorText=\"Please enter your verification code.\";}if(codeHasError){_this.setState({codeError:codeHasError,codeHelperText:codeErrorText});}else{_this.setState({isLoading:true});var verifyCode=Firebase.functions().httpsCallable('verifyCode');verifyCode({email:email,code:code}).then(function(result){if(result.data.success){this.createAccount();}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));}};_this.createAccount=function(){var _this$state2=_this.state,email=_this$state2.email,password=_this$state2.password;var signUp=Firebase.functions().httpsCallable('signUp');signUp({email:email,password:password}).then(function(result){if(result.data.success){store.set('token',result.data.token);this.displaySnackbar('success',\"Account successfully created.\");window.location='/home';}else{this.displaySnackbar('error',result.data.error);}}.bind(_assertThisInitialized(_this)));};return _this;}_createClass(Signup,[{key:\"validateForms\",value:function validateForms(){var _this$state3=this.state,email=_this$state3.email,password=_this$state3.password;var emailHasError=false;var emailErrorText=\"\";if(email===\"\"){emailHasError=true;emailErrorText=\"Please enter a valid email.\";}var passwordHasError=false;var passwordErrorText=\"\";if(password===\"\"){passwordHasError=true;passwordErrorText=\"Please enter a password.\";}if(emailHasError||passwordHasError){this.displayFormError(emailHasError,emailErrorText,passwordHasError,passwordErrorText);}else{this.sendVerificationCode();}}},{key:\"displayFormError\",value:function displayFormError(emailHasError,emailErrorText,passwordHasError,passwordErrorText){this.setState({emailError:emailHasError,emailHelperText:emailErrorText,passwordError:passwordHasError,passwordHelperText:passwordErrorText});}},{key:\"render\",value:function render(){var classes=this.props.classes;var _this$state4=this.state,code=_this$state4.code,codeError=_this$state4.codeError,codeHelperText=_this$state4.codeHelperText,email=_this$state4.email,emailHelperText=_this$state4.emailHelperText,emailError=_this$state4.emailError,password=_this$state4.password,passwordHelperText=_this$state4.passwordHelperText,passwordError=_this$state4.passwordError,isLoading=_this$state4.isLoading,snackbarIsOpen=_this$state4.snackbarIsOpen,snackbarMessage=_this$state4.snackbarMessage,snackbarVariant=_this$state4.snackbarVariant,verificationSent=_this$state4.verificationSent;return React.createElement(\"div\",{className:classes.container},React.createElement(Paper,{className:classes.paper},verificationSent?React.createElement(\"div\",{className:classes.contentContainer},React.createElement(\"img\",{src:logoIcon,className:classes.logoIcon,alt:\"\"}),React.createElement(Typography,{variant:\"h4\",gutterBottom:true},\"Confirm verification\"),React.createElement(\"div\",{className:classes.verificationText},\"Please enter the 6 digit verification code sent to \",React.createElement(\"span\",{className:classes.boldText},email),\".\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"If you did not receive it in your main inbox, please check your junk folder.\"),React.createElement(TextField,{fullWidth:true,error:codeError,className:classes.textField,id:\"outlined-code\",label:\"Code\",name:\"code\",type:\"text\",helperText:codeHelperText,value:code,onChange:this.handleChange('code'),variant:\"outlined\"}),React.createElement(Button,{className:classes.button,size:\"large\",variant:'contained',color:\"primary\",fullWidth:true,onClick:this.handleCodeVerification},isLoading?React.createElement(CircularProgress,{variant:\"indeterminate\",disableShrink:true,size:24,thickness:4}):'Verify code'),React.createElement(\"div\",{className:classes.linkContainerVerification},React.createElement(\"a\",{className:classes.link,href:\"#\",onClick:this.sendVerificationCode},\"Resend activation code?\"),React.createElement(\"a\",{className:classes.link,href:\"/signin\"},\"Sign in\"))):React.createElement(\"div\",{className:classes.contentContainer},React.createElement(\"img\",{src:logoIcon,className:classes.logoIcon,alt:\"\"}),React.createElement(Typography,{variant:\"h4\",gutterBottom:true},\"Create an account\"),React.createElement(TextField,{fullWidth:true,error:emailError,className:classes.textField,id:\"outlined-email\",label:\"Email\",name:\"email\",type:\"email\",helperText:emailHelperText,value:email,onChange:this.handleChange('email'),variant:\"outlined\"}),React.createElement(TextField,{fullWidth:true,error:passwordError,className:classes.textField,id:\"outlined-password\",label:\"Password\",name:\"password\",type:\"password\",value:password,helperText:passwordHelperText,onChange:this.handleChange('password'),variant:\"outlined\"}),React.createElement(Button,{className:classes.button,size:\"large\",variant:'contained',color:\"primary\",fullWidth:true,onClick:this.handleOnClick},isLoading?React.createElement(CircularProgress,{variant:\"indeterminate\",disableShrink:true,size:24,thickness:4}):'Create account'),React.createElement(\"div\",{className:classes.linkContainer},React.createElement(\"div\",null),React.createElement(\"a\",{className:classes.link,href:\"/signin\"},\"Existing account? Sign in now\")))),React.createElement(\"div\",{className:classes.footer},React.createElement(Footer,null)),React.createElement(CustomSnackbar,{variant:snackbarVariant,message:snackbarMessage,open:snackbarIsOpen,onSnackBarClose:this.onSnackBarClose}));}}]);return Signup;}(Component);export default withStyles(styles)(Signup);","map":{"version":3,"sources":["/Users/satraj/Documents/web/satstreet/src/components/main/Signup.js"],"names":["React","Component","Button","CircularProgress","Paper","Typography","TextField","withStyles","palette","logoIcon","Footer","Firebase","CustomSnackbar","store","require","styles","boldText","fontWeight","button","margin","container","display","justifyContent","contentContainer","alignItems","flexDirection","padding","footer","width","paper","position","boxShadow","borderRadius","top","border","borderColor","gray","linkContainer","linkContainerVerification","link","color","blue","fontSize","textDecoration","marginBottom","objectFit","height","textField","marginTop","verificationText","letterSpacing","lineHeight","Signup","state","code","codeHelperText","codeError","email","emailHelperText","emailError","password","passwordHelperText","passwordError","verificationSent","snackbarIsOpen","snackbarVariant","snackbarMessage","handleChange","name","event","setState","target","value","handleOnClick","validateForms","onSnackBarClose","displaySnackbar","variant","message","isLoading","sendVerificationCode","generateCode","functions","httpsCallable","then","result","data","success","error","bind","handleCodeVerification","codeHasError","codeErrorText","verifyCode","createAccount","signUp","set","token","window","location","emailHasError","emailErrorText","passwordHasError","passwordErrorText","displayFormError","classes","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Button from '@material-ui/core/Button'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport Paper from '@material-ui/core/Paper'\nimport Typography from '@material-ui/core/Typography'\nimport TextField from '@material-ui/core/TextField'\nimport { withStyles } from '@material-ui/core/styles'\nimport { palette } from '../../constants/styles'\nimport logoIcon from '../../images/logo.png'\nimport Footer from './Footer'\nimport Firebase from '../../constants/firebase'\nimport CustomSnackbar from '../shared/CustomSnackbar'\n\nvar store = require('store')\n\nconst styles = {\n  boldText: {\n    fontWeight: 700\n  },\n\n  button: {\n    margin: '30px 0 0 0'\n  },\n\n  container: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n\n  contentContainer: {\n    alignItems: 'center',\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    padding: '40px 20px 40px 20px',\n\n    '@media (min-width:780px)': {\n      padding: '40px 40px 40px 40px',\n    },\n  },\n\n  footer: {\n    margin: '95vh 0 0 0',\n    width: '100%'\n  },\n\n  paper: {\n    position: 'absolute',\n    width: '100%',\n    boxShadow: 'none',\n    borderRadius: '5px',\n\n    '@media (min-width:780px)': {\n      top: '16%',\n      width: '500px',\n      border: '1px solid',\n      borderColor: palette.gray[0]\n    },\n  },\n\n  linkContainer: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    margin: '25px 0 30px 0',\n    width: '100%'\n  },\n\n  linkContainerVerification: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    margin: '25px 0 30px 0',\n    width: '100%'\n  },\n\n  link: {\n    color: palette.blue[0],\n    fontWeight: 700,\n    fontSize: '15px',\n    textDecoration: 'none',\n\n    \"&:hover\": {\n      textDecoration: 'underline'\n    }\n  },\n\n  logoIcon: {\n    marginBottom: '30px',\n    objectFit: 'contain',\n    height: '40px',\n    width: '40px'\n  },\n\n  textField: {\n    marginTop: '25px'\n  },\n\n  verificationText: {\n    fontSize: '15px',\n    margin: '30px 0 0 0',\n    letterSpacing: 0.3,\n    lineHeight: '20px',\n  }\n}\n\nclass Signup extends Component {\n  state = {\n    code: '',\n    codeHelperText: '',\n    codeError: false,\n    email: '',\n    emailHelperText: '',\n    emailError: false,\n    password: '',\n    passwordHelperText: '',\n    passwordError: false,\n    verificationSent: false,\n    snackbarIsOpen: false,\n    snackbarVariant: 'success',\n    snackbarMessage: ''\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n      emailHelperText: '',\n      emailError: false,\n      passwordHelperText: '',\n      passwordError: false,\n      codeHelperText: '',\n      codeError: false\n    })\n  }\n\n  handleOnClick = event => {\n    this.validateForms()\n  }\n\n  validateForms() {\n    const { email, password } = this.state\n\n    var emailHasError = false\n    var emailErrorText = \"\"\n\n    if (email === \"\") {\n      emailHasError = true\n      emailErrorText = \"Please enter a valid email.\"\n    }\n\n    var passwordHasError = false\n    var passwordErrorText = \"\"\n\n    if (password === \"\") {\n      passwordHasError = true\n      passwordErrorText = \"Please enter a password.\"\n    }\n\n    if (emailHasError || passwordHasError) {\n      this.displayFormError(emailHasError, emailErrorText, passwordHasError, passwordErrorText)\n    } else {\n      this.sendVerificationCode()\n    }\n  }\n\n  displayFormError(emailHasError, emailErrorText, passwordHasError, passwordErrorText) {\n    this.setState({\n      emailError: emailHasError,\n      emailHelperText: emailErrorText,\n      passwordError: passwordHasError,\n      passwordHelperText: passwordErrorText\n    })\n  }\n\n  onSnackBarClose = () => {\n    this.setState({\n      snackbarIsOpen: false\n    })\n  }\n\n  displaySnackbar = (variant, message) => {\n    this.setState({\n      snackbarIsOpen: true,\n      snackbarVariant: variant,\n      snackbarMessage: message,\n      isLoading: false\n    })\n  }\n\n  sendVerificationCode = () => {\n    const { email } = this.state\n\n    this.setState({ isLoading: true })\n\n    var generateCode = Firebase.functions().httpsCallable('generateCode')\n    generateCode({ email: email }).then(function (result) {\n      if (result.data.success) {\n        this.setState({ \n          verificationSent: true,\n          isLoading: false\n         })\n      } else {\n        this.displaySnackbar('error', result.data.error)\n      }\n    }.bind(this))\n  }\n\n  handleCodeVerification = () => {\n    const { email, code } = this.state\n\n    var codeHasError = false\n    var codeErrorText = \"\"\n\n    if (code === \"\") {\n      codeHasError = true\n      codeErrorText = \"Please enter your verification code.\"\n    }\n\n    if (codeHasError) {\n      this.setState({\n        codeError: codeHasError,\n        codeHelperText: codeErrorText,\n      })\n    } else {\n      this.setState({ isLoading: true })\n\n      var verifyCode = Firebase.functions().httpsCallable('verifyCode')\n      verifyCode({ email: email, code: code }).then(function (result) {\n        if (result.data.success) {\n          this.createAccount()\n        } else {\n          this.displaySnackbar('error', result.data.error)\n        }\n      }.bind(this))\n    }\n  }\n\n  createAccount = () => {\n    const { email, password } = this.state\n\n    var signUp = Firebase.functions().httpsCallable('signUp')\n    signUp({ email: email, password: password }).then(function (result) {\n      if (result.data.success) {\n        store.set('token', result.data.token)\n        this.displaySnackbar('success', \"Account successfully created.\")\n        window.location = '/home'\n      } else {\n        this.displaySnackbar('error', result.data.error)\n      }\n    }.bind(this))\n  }\n\n  render() {\n    const { classes } = this.props\n    const { code, codeError, codeHelperText, email, emailHelperText, emailError, password, passwordHelperText, passwordError, isLoading, snackbarIsOpen, snackbarMessage, snackbarVariant, verificationSent } = this.state\n\n    return (\n      <div className={classes.container}>\n        <Paper className={classes.paper}>\n            {\n              verificationSent ?\n\n              <div className={classes.contentContainer}>\n                <img src={logoIcon} className={classes.logoIcon} alt=\"\" />\n                <Typography variant=\"h4\" gutterBottom>\n                  Confirm verification\n                </Typography>\n\n                <div className={classes.verificationText}>\n                  Please enter the 6 digit verification code sent to <span className={classes.boldText}>{email}</span>.<br /><br />If you did not receive it in your main inbox, please check your junk folder.\n                </div>\n\n                <TextField\n                  fullWidth\n                  error={codeError}\n                  className={classes.textField}\n                  id=\"outlined-code\"\n                  label=\"Code\"\n                  name=\"code\"\n                  type=\"text\"\n                  helperText={codeHelperText}\n                  value={code}\n                  onChange={this.handleChange('code')}\n                  variant=\"outlined\"\n                />\n\n                <Button\n                  className={classes.button}\n                  size=\"large\"\n                  variant={'contained'}\n                  color=\"primary\"\n                  fullWidth\n                  onClick={this.handleCodeVerification}\n                >\n                  {isLoading ? (\n                    <CircularProgress\n                      variant=\"indeterminate\"\n                      disableShrink\n                      size={24}\n                      thickness={4}\n                    />\n                  ) : (\n                      'Verify code'\n                  )}\n                </Button>\n\n                <div className={classes.linkContainerVerification}>\n                  <a className={classes.link} href={\"#\"} onClick={this.sendVerificationCode}>Resend activation code?</a>\n                  <a className={classes.link} href={\"/signin\"}>Sign in</a>\n                </div>\n              </div>\n\n              :\n\n              <div className={classes.contentContainer}>\n                <img src={logoIcon} className={classes.logoIcon} alt=\"\" />\n                <Typography variant=\"h4\" gutterBottom>\n                  Create an account\n                </Typography>\n\n                <TextField\n                  fullWidth\n                  error={emailError}\n                  className={classes.textField}\n                  id=\"outlined-email\"\n                  label=\"Email\"\n                  name=\"email\"\n                  type=\"email\"\n                  helperText={emailHelperText}\n                  value={email}\n                  onChange={this.handleChange('email')}\n                  variant=\"outlined\"\n                />\n\n                <TextField\n                  fullWidth\n                  error={passwordError}\n                  className={classes.textField}\n                  id=\"outlined-password\"\n                  label=\"Password\"\n                  name=\"password\"\n                  type=\"password\"\n                  value={password}\n                  helperText={passwordHelperText}\n                  onChange={this.handleChange('password')}\n                  variant=\"outlined\"\n                />\n\n                <Button\n                  className={classes.button}\n                  size=\"large\"\n                  variant={'contained'}\n                  color=\"primary\"\n                  fullWidth\n                  onClick={this.handleOnClick}\n                >\n                  {isLoading ? (\n                    <CircularProgress\n                      variant=\"indeterminate\"\n                      disableShrink\n                      size={24}\n                      thickness={4}\n                    />\n                  ) : (\n                      'Create account'\n                    )}\n                </Button>\n\n                <div className={classes.linkContainer}>\n                  <div />\n                  <a className={classes.link} href={\"/signin\"}>Existing account? Sign in now</a>\n                </div>\n\n              </div>\n            }\n        </Paper>\n        <div className={classes.footer}>\n          <Footer />\n        </div>\n        <CustomSnackbar variant={snackbarVariant} message={snackbarMessage} open={snackbarIsOpen} onSnackBarClose={this.onSnackBarClose}/>\n      </div>\n    )\n  }\n}\n\nSignup.propTypes = {\n  classes: PropTypes.object.isRequired\n}\n\nexport default withStyles(styles)(Signup)"]},"metadata":{},"sourceType":"module"}